# Software Requirements Specification (SRS)
## ระบบเว็บแอปคำนวณดัชนีมวลกาย (BMI Web Application)

---

## 1. บทนำ (Introduction)

### 1.1 วัตถุประสงค์ของเอกสาร
เอกสารฉบับนี้ระบุความต้องการเชิงหน้าที่และไม่ใช่หน้าที่ของระบบเว็บแอป BMI ซึ่งรองรับผู้ใช้งานหลายคน พัฒนาด้วย Next.js เวอร์ชันล่าสุด และใช้ฐานข้อมูล SQLite รวมถึงมีระบบรายงานเชิงบริหาร (MIS Report) ย้อนหลังรายวัน รายสัปดาห์ รายเดือน และรายปี เอกสารนี้เป็นข้อกำหนดอ้างอิงสำหรับทีมพัฒนา ทดสอบ และผู้มีส่วนได้ส่วนเสีย

### 1.2 ขอบเขตของระบบ
ระบบเว็บแอป BMI เป็นระบบที่ให้ผู้ใช้สามารถ:
- ลงทะเบียนและเข้าสู่ระบบแบบหลายผู้ใช้
- บันทึก/แก้ไข/ลบข้อมูลน้ำหนัก ส่วนสูง และข้อมูลที่เกี่ยวข้องเพื่อคำนวณ BMI
- แสดงผลค่า BMI ปัจจุบันและประวัติย้อนหลัง
- แสดงรายงาน MIS ตามช่วงเวลา (วัน/สัปดาห์/เดือน/ปี) ทั้งในระดับผู้ใช้แต่ละคน และระดับภาพรวมระบบ (สำหรับผู้ดูแลระบบ)

### 1.3 ผู้อ่านเป้าหมาย
- ทีมพัฒนา (Developers / Frontend / Backend)
- ทีมทดสอบ (Testers / QA)
- ผู้ว่าจ้าง / เจ้าของผลิตภัณฑ์ (Product Owner)
- ผู้ดูแลระบบ (System Administrator)

### 1.4 คำจำกัดความและคำย่อ
- BMI: Body Mass Index (ดัชนีมวลกาย)
- MIS: Management Information System
- User: ผู้ใช้งานทั่วไปของระบบ
- Admin: ผู้ดูแลระบบ
- Next.js: Framework สำหรับพัฒนา web application ด้วย React
- SQLite: Relational database แบบฝังตัว (embedded)

---

## 2. ภาพรวมระบบ (Overall Description)

### 2.1 มุมมองผลิตภัณฑ์
ระบบ BMI เป็นเว็บแอปที่ทำงานบนเบราว์เซอร์ ผู้ใช้เข้าถึงผ่าน URL โดุยไม่ต้องติดตั้งโปรแกรมเพิ่มเติม ฝั่งเซิร์ฟเวอร์ใช้ Next.js เวอร์ชันล่าสุด ทำงานร่วมกับฐานข้อมูล SQLite ที่จัดเก็บข้อมูลผู้ใช้และประวัติ BMI ทุกครั้งที่มีการบันทึก

### 2.2 ฟังก์ชันหลักของระบบ (สรุป)
- การจัดการบัญชีผู้ใช้: สมัครสมาชิก, เข้าสู่ระบบ, ออกจากระบบ, ลืมรหัสผ่าน (ถ้าต้องการ)
- การจัดการโปรไฟล์: บันทึกข้อมูลส่วนตัวที่ใช้คำนวณ BMI
- การบันทึกและคำนวณ BMI: บันทึกน้ำหนัก ส่วนสูง, คำนวณ BMI และจัดเก็บ
- การดูประวัติ: แสดงรายการค่าที่เคยบันทึกพร้อมกราฟ/ตาราง
- ระบบรายงาน MIS:
  - รายงานสรุป BMI รายวัน รายสัปดาห์ รายเดือน รายปี
  - รายงานเฉพาะของผู้ใช้แต่ละคน
  - รายงานสรุปเชิงรวมสำหรับผู้ดูแลระบบ (เช่น การกระจายตัวของ BMI ผู้ใช้ทุกคน)

### 2.3 ประเภทผู้ใช้งาน
- ผู้ใช้งานทั่วไป (User)
  - ลงทะเบียน/เข้าสู่ระบบ
  - บันทึก BMI ของตนเอง
  - ดูประวัติและรายงานของตนเอง
- ผู้ดูแลระบบ (Admin)
  - จัดการผู้ใช้ (ดู/ระงับ/ลบผู้ใช้ หากต้องการ)
  - ดูรายงาน MIS เชิงรวมของระบบ

### 2.4 สมมติฐานและข้อจำกัด
- ระบบรองรับการใช้งานผ่านเบราว์เซอร์สมัยใหม่ (Chrome, Edge, Firefox)
- ใช้ Next.js เวอร์ชันล่าสุด ณ วันที่พัฒนา
- ใช้ฐานข้อมูล SQLite ภายในแอปพลิเคชันเดียว (ไม่มีฐานข้อมูลภายนอก)
- ปริมาณข้อมูลและจำนวนผู้ใช้ไม่เกินข้อจำกัดการใช้งานทั่วไปของ SQLite

---

## 3. ความต้องการเชิงหน้าที่ (Functional Requirements)

### 3.1 การจัดการบัญชีผู้ใช้ (User Account Management)

**FR-01 ลงทะเบียนผู้ใช้**
- ผู้ใช้ใหม่สามารถลงทะเบียนด้วยข้อมูลขั้นต่ำ:
  - อีเมล (ต้องไม่ซ้ำกัน)
  - รหัสผ่าน
  - ชื่อที่แสดุ (Display Name)
- ระบบต้องตรวจสอบความถูกต้องอีเมล และความยาว/รูปแบบรหัสผ่านตามนโยบายที่กำหนด

**FR-02 เข้าสู่ระบบ**
- ผู้ใช้สามารถเข้าสู่ระบบด้วยอีเมลและรหัสผ่านที่ถูกต้อง
- เมื่อเข้าสู่ระบบสำเร็จ ระบบสร้างเซสชัน/โทเคนเพื่อระบุตัวตน
- ในกรณกรอกข้อมูลผิด ระบบแจ้งข้อผิดพลาดอย่างเหมาะสม

**FR-03 ออกจากระบบ**
- ผู้ใช้สามารถออกจากระบบได้ และระบบต้องลบ/ทำให้เซสชันหมดอายุทันที

**FR-04 (ทางเลือก) ลืมรหัสผ่าน**
- หากกำหนดใช้ ระบบอาจให้ฟังก์ชันรีเซ็ตรหัสผ่านผ่านอีเมล หรือช่องทางที่ตกลง

### 3.2 การจัดการข้อมูลโปรไฟล์ (Profile Management)

**FR-05 บันทึก/แก้ไขโปรไฟล์ผู้ใช้**
- ผู้ใช้สามารถระบุ/แก้ไขข้อมูลพื้นฐาน เช่น เพศ อายุ หน่วยของน้ำหนัก/ส่วนสูง (kg/cm หรือ lbs/inch) ตามความจำเป็น
- ข้อมูลเหล่านี้ใช้เป็นค่าเริ่มต้นในการบันทึก BMI

### 3.3 การบันทึกค่า BMI (BMI Record Management)

**FR-06 บันทึกค่าการชั่งแต่ละครั้ง**
- ผู้ใช้สามารถบันทึก:
  - วันที่และเวลา (ค่า default เป็นเวลาปัจจุบัน)
  - น้ำหนัก
  - ส่วนสูง (ถ้าไม่ใช้ค่าจากโปรไฟล์)
- ระบบคำนวณ BMI อัตโนมัติด้วยสูตรมาตรฐาน:
  - BMI = น้ำหนัก (kg) / (ส่วนสูง (m))²

**FR-07 การจัดประเภท BMI**
- หลังคำนวณ BMI ระบบระบุหมวดหมู่ เช่น:
  - น้ำหนักน้อยกว่าปกติ
  - น้ำหนักปกติ
  - น้ำหนักเกิน
  - อ้วนระดับ 1, 2 (ตามเกณฑ์ที่กำหนด)
- หมวดหมู่ถูกจัดเก็บในฐานข้อมูลพร้อมค่าที่คำนวณ

**FR-08 ดู/ค้นหาประวัติ BMI**
- ผู้ใช้สามารถดูรายการประวัติ BMI ของตนเองในรูปแบบตารางหรือกราฟ
- สามารถกรองตามช่วงวันที่

**FR-09 ลบ/แก้ไขค่าที่บันทึก**
- ผู้ใช้สามารถแก้ไขหรือยกเลิก (ลบ) รายการ BMI ที่บันทึกผิด

### 3.4 การแสดงผลและวิเคราะห์ (Visualization & Analytics)

**FR-10 กราฟแนวโน้ม BMI**
- ระบบสามารถแสดงกราฟแนวโน้ม BMI ต่อเวลา (เช่น เส้นหรือแท่ง) สำหรับผู้ใช้แต่ละคน

**FR-11 สรุปสถิติส่วนบุคคล**
- แสดงค่า BMI เฉลี่ย, สูงสุด, ต่ำสุด ในช่วงเวลาที่เลือก

### 3.5 ระบบรายงาน MIS (MIS Reports)

#### 3.5.1 รายงานรายวัน (Daily Report)

**FR-12 รายงานรายวันต่อผู้ใช้**
- ผู้ใช้สามารถดูสรุปค่าที่บันทึกในแต่ละวัน:
  - จำนวนครั้งที่บันทึก
  - ค่า BMI ล่าสุดของวัน
  - ค่าเฉลี่ย BMI ของวัน (ถ้ามีหลายรายการ)

**FR-13 รายงานรายวันรวมระบบ (Admin)**
- ผู้ดูแลระบบสามารถดูสรุปในระดับระบบ:
  - จำนวนผู้ใช้ที่มีการบันทึกในวันนั้น
  - ค่า BMI เฉลี่ยรวม
  - การกระจายตัวของหมวดหมู่ BMI (เช่น กี่คนอยู่ในช่วงใด)

#### 3.5.2 รายงานรายสัปดาห์ (Weekly Report)

**FR-14 สรุปรายสัปดาห์**
- ผู้ใช้และผู้ดูแลระบบสามารถเลือกช่วงสัปดาห์ (เช่น สัปดาห์ที่ n ของปี หรือเลือกวันที่เริ่มต้น) เพื่อดู:
  - ค่า BMI เฉลี่ยของสัปดาห์
  - แนวโน้มต่อวันในสัปดาห์ (กราฟ)
  - การกระจายตัวของหมวดหมู่ BMI

#### 3.5.3 รายงานรายเดือน (Monthly Report)

**FR-15 สรุปรายเดือน**
- เลือกเดือนและปี เพื่อแสดง:
  - ค่า BMI เฉลี่ยรายเดือน
  - กราฟค่าเฉลี่ยรายวัน/รายสัปดาห์ภายในเดือน
  - การกระจายตัวของหมวดหมู่ BMI ในเดือนนั้น

#### 3.5.4 รายงานรายปี (Yearly Report)

**FR-16 สรุปรายปี**
- เลือกปี เพื่อดู:
  - ค่า BMI เฉลี่ยรายปี
  - กราฟค่าเฉลี่ยรายเดือนในรอบปี
  - การเปลี่ยนแปลงหมวดหมู่ BMI ต่อปี

#### 3.5.5 ฟิลเตอร์และการจำกัดมุมมอง

**FR-17 ฟิลเตอร์ข้อมูลในรายงาน**
- รายงานทุกประเภทควรรองรับการกรองตามเงื่อนไข เช่น:
  - ช่วงวันที่
  - หมวดหมู่ BMI (น้ำหนักน้อย, ปกติ, เกิน, อ้วน)
  - เพศ (หากมีในโปรไฟล์)
- สำหรับผู้ใช้ทั่วไป แสดงเฉพาะข้อมูลของตนเอง
- สำหรับผู้ดูแลระบบ สามารถเลือกดูกลุ่มผู้ใช้ หรือทั้งหมด

### 3.6 การจัดการผู้ดูแลระบบ (Admin Management)

**FR-18 เข้าสู่ระบบในฐานะ Admin**
- กำหนดบทบาทผู้ใช้บางคนเป็น Admin
- Admin สามารถเข้าถึงหน้ารายงานรวมและ��น้าจัดการผู้ใช้

**FR-19 การจัดการผู้ใช้**
- Admin สามารถ:
  - ดูรายชื่อผู้ใช้ทั้งหมด
  - ดูรายละเอียดเบื้องต้นและ������นวนการบันทึกของผู้ใช้แต่ละคน
  - ระงับ/ปิดการใช้งานผู้ใช้ (ถ้าต้องการ)

---

## 4. ความต้องการเชิงไม่ใช่หน้าที่ (Non-functional Requirements)

### 4.1 เทคโนโลยีและแพลตฟอร์ม

**NFR-01 เทคโนโลยีหลัก**
- Frontend / Backend: Next.js เวอร์ชันล่าสุด
- ฐานข้อมูล: SQLite
- ภาษาโปรแกรมหลัก: JavaScript หรือ TypeScript (ระบุในระดับออกแบบ)

**NFR-02 รองรับหลายผู้ใช้ (Multi-user)**
- ระบบต้องรองรับการใช้งานพร้อมกันของผู้ใช้หลายคนโดยไม่ชนกันของข้อมูล (แต่ละผู้ใช้เห็นข้อมูลเฉพาะของตน ยกเว้นมุมมอง Admin)

### 4.2 ประสิทธิภาพ (Performance)

**NFR-03 การตอบสนอง**
- หน้าจอหลัก (Dashboard/รายการประวัติ) โหลดข้อมูลสำเร็จภายใน ~3 วินาที ภายใต้ปริมาณข้อมูลปกติของ SQLite

**NFR-04 การสืบค้นรายงาน**
- การสร้างรายงานรายวัน/สัปดาห์/เดือน/ปีควรใช้เวลาในระดับวินาที ไม่ควรยาวเกินไปสำหรับขนาดข้อมูลปกติ

### 4.3 ความปลอดภัย (Security)

**NFR-05 การพิสูจน์ตัวตนและการอนุญาตสิทธิ์**
- ใช้กลไกการเข้าสู่ระบบที่ปลอดภัย (เช่น การแฮ็ชรหัสผ่าน)
- แยกสิทธิ์ระหว่าง User และ Admin ชัดเจน
- ป้องกันการเข้าถึงข้อมูลของผู้ใช้อื่นที่ไม่ได้รับอนุญาต

**NFR-06 การเข้ารหัสข้อมูลสำคัญ**
- รหัสผ่านต้องเก็บในรูปแบบเข้ารหัส/แฮ็ช
- ไม่เก็บข้อมูลสำคัญเป็น plaintext

### 4.4 ความน่าเชื่อถือและความทนทาน (Reliability)

**NFR-07 ความพร้อมใช้งาน**
- ระบบควรทำงานได้อย่างต่อเนื่องในเวลาทำการที่กำหนด (ขึ้นอยู่กับสภาพแวดล้อมจริง)

**NFR-08 การสำรองข้อมูล**
- ต้องมีวิธีการสำรองไฟล์ฐานข้อมูล SQLite ตามรอบเวลา (อาจเป็นกระบวนการภายนอก หรือสคริปต์เสริม)

### 4.5 การใช้งาน (Usability)

**NFR-09 อินเทอร์เฟซผู้ใช้**
- UI ใช้งานง่าย ไม่ซับซ้อน
- รองรับภาษาไทย (อาจรองรับภาษาอื่นเพิ่มเติมได้ภายหลัง)
- ฟอร์มมีการแสดงข้อความผิดพลาดชัดเจนเมื่อกรอกข้อมูลไม่ถูกต้อง

### 4.6 การรองรับการขยายตัว (Scalability – ภายใต้ข้อจำกัด SQLite)

**NFR-10**
- รองรับจำนวนผู้ใช้และข้อมูลที่เหมาะสมกับ SQLite หากเกินขนาดที่กำหนดอาจต้องพิจารณาเปลี่ยนฐานข้อมูลในอนาคต (อยู่นอกขอบเขต SRS นี้)

---

## 5. สถาปัตยกรรมและ����������� (Architecture & Data)

### 5.1 ภาพรวมสถาปัตยกรรม

- Client (Browser) เรียกใช้งานหน้าเว็บที่สร้างด้วย Next.js
- Server-side ของ Next.js รับคำขอ API เช่น ลงทะเบียน, เข้าสู่ระบบ, บันทึก BMI, ดึงประวัติ, ดึงรายงาน
- SQLite ใช้จัดเก็บ:
  - ข้อมูลผู้ใช้
  - ประวัติ BMI
  - ข้อมูลที่เกี่ยวข้องกับรายงาน

### 5.2 โครงสร้างฐานข้อมูลเบื้องต้น (Initial Data Model)

ตารางหลัก (ตัวอย่าง):

1) ตาราง `users`
- id (PK, integer, auto-increment)
- email (unique, text)
- password_hash (text)
- display_name (text)
- role (text) เช่น "user" หรือ "admin"
- created_at (datetime)
- updated_at (datetime)

2) ตาราง `profiles` (ถ้าต้องการแยกจาก users)
- id (PK)
- user_id (FK → users.id)
- gender (text / nullable)
- age (integer / nullable)
- height_default (real / nullable) – ส่วนสูงค่าเริ่มต้น
- unit_weight (text: "kg" / "lb")
- unit_height (text: "cm" / "inch")

3) ตาราง `bmi_records`
- id (PK, integer, auto-increment)
- user_id (FK → users.id)
- recorded_at (datetime)
- weight (real)
- height (real)
- bmi_value (real)
- bmi_category (text) – เช่น "underweight", "normal", "overweight", "obese1", "obese2"
- created_at (datetime)

หมายเหตุ: การสรุปรายงาน MIS สามารถใช้ query รวม (aggregation) จาก `bmi_records` ตามช่วงวัน/สัปดาห์/เดือน/ปี โดยไม่จำเป็นต้องมีตาราง report แยกในระยะแรก

---

## 6. ข้อกำหนดด้านการทดสอบ (Acceptance & Testing Requirements)

### 6.1 การทดสอบฟังก์ชันหลัก
- ทดสอบการลงทะเบียน/เข้าสู่ระบบ/ออกจากระบบ (User & Admin)
- ทดสอบการบันทึก/แก้ไข/ลบ BMI และตรวจสอบค่าที่คำนวณถูกต้อง
- ทดสอบการแสดงประวัติ BMI และกราฟแนวโน้ม
- ทดสอบรายงานรายวัน/สัปดาห์/เดือน/ปี ทั้งในมุมมองผู้ใช้และ Admin

### 6.2 การทดสอบ Non-functional
- ทดสอบเวลาในการตอบสนองของหน้า Dashboard และรายงาน
- ทดสอบการป้องกันการเข้าถึงข้อมูลผู้ใช้อื่นโดยตรง (เช่น ลองเข้าถึง URL ของผู้ใช้อื่น)

---

## 7. ข้อกำหนดด้านการติดตั้งและสภาพแวดล้อม (Deployment & Environment)

**DEP-01 สภาพแวดล้อมการพัฒนา**
- Node.js เวอร์ชันที่รองรับ Next.js เวอร์ชันล่าสุด
- SQLite ติดตั้งหรือมากับระบบปฏิบัติการ/ไลบรารี

**DEP-02 สภาพแวดล้อมการใช้งานจริง**
- เซิร์ฟเวอร์ที่สามารถรัน Next.js และเข้าถึงไฟล์ฐานข้อมูล SQLite ได้
- การตั้งค่าสิทธิ์ไฟล์และโฟลเดอร์เพื่อป้องกันฐานข้อมูลจากการเข้าถึงโดยตรงโดยไม่ได้รับอนุญาต

---

## 8. ข้อกำหนดเพิ่มเติม (ถ้ามีในอนาคต)
- การส่งออกข้อมูลรายงานเป็นไฟล์ (เช่น CSV, PDF)
- การเชื่อมต่อกับระบบภายนอก
- การรองรับ Mobile-first / Responsive design โดยละเอียด